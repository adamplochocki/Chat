<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      html,
      body {
        height: 100%;
        width: 100%;
        margin: 0;
        overflow: hidden;
      }

      #container {
        width: 70%;
        height: 90%;
        margin: 2.5% 15% 2.5% 15%;
        background-color: rgb(37, 37, 41);
        border-radius: 10px;
        overflow: hidden;
        position: relative;
      }

      #rooms {
        width: 100%;
        height: 90%;
        overflow: hidden;
        overflow-y: auto;
      }

      .room {
        height: 50px;
        border: solid white 1px;
        border-radius: 7px;
        width: 98;
        margin: 2%;
        transition: transform 0.1s;
      }

      .room:hover {
        background-color: rgb(57, 57, 62);
        transform: scale(1.01);
      }

      .room:active {
        transform: scale(0.99);
      }

      .room p {
        color: white;
        font-size: 2.1rem;
        font-family: arial;
        padding: 5px;
        margin: 0;
        overflow: hidden;
        word-break: break-all;
        height: 75%;
        user-select: none;
      }

      button {
        position: absolute;
        bottom: 20px;
        width: 50%;
        left: 25%;
        height: 40px;
        border-radius: 5px;
        background-color: rgb(56, 58, 73);
        border: none;
        font-size: 1.5rem;
        color: white;
        transition: transform 0.1s;
      }

      button:active {
        transform: translateY(5px);
      }
    </style>
    <title>Chat</title>
  </head>
  <body>
    <div id="container">
      <div id="rooms"></div>
      <button>Dodaj pokuj</button>
    </div>

    <script>
      // jeśli użytkownik kliknie przycisk dodania nowego pokoju to przekieruj go do strony dodania pokoju
      document.querySelector("button").onclick = () => {
        window.location.href = "add/add.html";
      };

      // pobierz pokoje użytkownika i jeśli są jakie, to je wyświetl
      const rooms = localStorage.getItem("rooms");
      if (rooms) {
        showRoom(JSON.parse(rooms));
      }

      function showRoom(chats) {
        chats.forEach((room) => {
          const roomElement = document.createElement("div");
          roomElement.classList.add("room");

          roomElement.innerHTML = `<p>${room.name}</p>`;
          roomElement.dataset.id = room.name;

          // jeśli użytkownik kliknie na nazwe pokoju to przekieruj go do strony tego pokoju
          roomElement.onclick = (e) => {
            window.location.href =
              "chat/chat.html?id=" + roomElement.dataset.id;
          };

          document.querySelector("#rooms").appendChild(roomElement);
        });
      }
    </script>
  </body>
</html>
